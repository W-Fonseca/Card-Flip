<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>üö∂Card-Flip</title>
    <link rel="icon" href="caminho/para/sua/logo.ico" type="image/x-icon">
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial;
            font-family: Arial, sans-serif;
            padding: 0;
            font-size: 16px;
            overflow-x: hidden;
            /* üëà for√ßa a remo√ß√£o da barra de rolagem horizontal */
            overflow-y: hidden;

        }

        .grid-container {
            display: grid;
            grid-template-areas:
                "header header header"
                "content content sidebar"
                "footer footer footer";
            grid-template-columns: 2fr 2fr 1fr;
            /* Agora s√£o 3 colunas: content ocupa 2/3 e sidebar 1/3 */
            grid-template-rows: 10% 1fr 5%;
            gap: 10px;
            height: 100%;
            width: 100%;
            background-color: #ecf0f1;
            padding: 10px;
            box-sizing: border-box;
            transition: all 1.5s ease;
        }

        .header {
            grid-area: header;
            display: flex;
            background: #002238;
            border: #0fe 1px solid;
            justify-content: space-between;
            align-items: center;
            /* aqui deveria alinhar verticalmente */
            flex-wrap: wrap;
            padding: 1% 2%;
            font-size: 2vw;
        }

        .toggle-button {
            background: white;
            color: #3498db;
            border: none;
            padding: 1% 2%;
            font-size: 1.0vw;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
            width: auto;

        }

        .toggle-button:hover {
            background: #2980b9;
            color: white;
        }


        .content {
            grid-area: content;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 1.5s ease;
            overflow: hidden;
            /* Impede o #background-image de ultrapassar a borda */
            position: relative;

        }

        .sidebar {
            grid-area: sidebar;
            background: #00223885;
            padding: 1%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            font-size: 24px;
            transition: transform 1.5s ease, opacity 1.5s ease;
            overflow-y: auto;
            /* ‚¨ÖÔ∏è rolagem vertical autom√°tica */
            overflow-x: hidden;
            /* ‚¨ÖÔ∏è evita overflow lateral */
        }





        .footer {
  grid-area: footer;
  background: #002238;
            border: #0fe 1px solid;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  box-sizing: border-box;
  padding: 8px 12px; /* opcional para espa√ßamento */
}


.trofeus-container {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
  overflow: hidden;
}

.trofeus-container img {
  max-height: 32px;     /* üîë limita altura vis√≠vel */
  width: auto;
  object-fit: contain;
  display: hidden;
}

.cont-trofeu {
  font-weight: bold;
  font-size: 1rem;
  white-space: nowrap;
}



        .grid-container>div {
            color: white;
            border-radius: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        /* Sidebar escondida */
        .sidebar-hidden .sidebar {
            transform: translateX(100%);
            opacity: 0;
            pointer-events: none;
        }

        .sidebar-hidden {
            grid-template-columns: 1fr 1fr 0;
        }

        /* Responsividade - telas menores que 768px */
        /* (n√£o altera o grid, nem esconde nada) */
        @media (max-width: 768px) {
            .header {
                align-items: center;
                gap: 10px;
            }

            .navigation {
                justify-content: center;
                font-size: 1px;
            }

            .toggle-button {
                width: 20%;
                font-size: 2vw;
            }


            .welcome-message {
                padding: 20px;
            }

            .welcome-message h1 {
                font-size: 2em;
            }

            .welcome-message p {
                font-size: 1em;
            }

            #close-welcome {
                font-size: 16px;
                padding: 6px 12px;
            }

        }

        .navigation {
            display: flex;
            /* Espa√ßo entre os links */
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }

        .navigation a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
        }

        .navigation a:hover {
            color: #0ff;
            /* Cor neon ao passar o mouse */
        }

        
        /* ################## parte de LOGIN E REGISTRO ########################## */

        #login-container,
        #register-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
        }

        #login-container.active,
        #register-container.active {
            display: flex;
        }


        #login-container input,
        #register-container input {
            margin: 10px 0;
            padding: 10px;
            width: 80%;
            max-width: 300px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        #login-container button,
        #register-container button {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #login-container button:hover,
        #register-container button:hover {
            background-color: #2980b9;
        }

        .hidden {
            display: none;
        }

        #login-container.hidden,
        #register-container.hidden {
            display: none;
        }

        #move-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
        }

        #move-modal.hidden {
            display: none;
        }

        /* Estilo para o container de login */
        #login-container,
        #register-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            background-size: cover;
            overflow: hidden;
            /* Garante que nada ultrapasse os limites */
        }

        #login-container {
            background: linear-gradient(135deg, #3498db, #2ecc71);
        }

        #register-container {
            background: linear-gradient(135deg, #ae04f7, #260533);
            /* Gradiente roxo */
        }

        /* Caixa de login */
        .white-box {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            text-align: center;
            width: 100%;
            max-width: 400px;
        }

        /* T√≠tulo */
        .white-box h2 {
            margin-bottom: 20px;
            font-size: 24px;
            color: #333;
        }

        /* Inputs */
        .white-box input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        /* Bot√£o de login */
        .white-box button {
            width: 100%;
            padding: 12px;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #login-container .white-box button {
            background: linear-gradient(135deg, #3498db, #2ecc71);
        }

        #login-container .white-box button:hover {
            background: linear-gradient(135deg, #2ecc71, #3498db);
        }

        #register-container .white-box button {
            background: linear-gradient(135deg, #ae04f7, #260533);
        }

        #register-container .white-box button:hover {
            background: linear-gradient(135deg, #260533, #ae04f7);
        }

        .white-box button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .white-box button:focus {
            outline: none;
            box-shadow: 0 0 8px rgba(50, 152, 219, 0.8);
        }

        /* Link para registro */
        .white-box p {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }

        .white-box p a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }

        .white-box p a:hover {
            text-decoration: underline;
        }

        /* Inputs e bot√£o com o mesmo tamanho */
        .white-box input,
        .white-box button {
            width: 100%;
            /* Define a largura como 100% */
            max-width: 300px;
            /* Define um limite m√°ximo de largura */
            box-sizing: border-box;
            /* Inclui padding no c√°lculo da largura */
        }

        /* ################ FIM LOGIN E REGISTRO #######################*/
        /* ################ CARD ######################### */
        .card-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: flex-start;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            overflow-x: hidden;
            box-sizing: border-box;
            padding: 10px;
            z-index: 1;
            position: relative;

            /* Esconde a barra no Chrome, Edge, Safari */
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* Internet Explorer e Edge antigo */
        }

        .card-row::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari e Opera */
        }



        .card {
            flex: 1 1 200px;
            max-width: 300px;
            height: auto;
            margin: 10px;
            box-sizing: border-box;
        }


        .card .front img {
            width: 100%;
            /* A imagem ocupa toda a largura do cart√£o */
            height: 100%;
            /* A imagem ocupa toda a altura do cart√£o */
            object-fit: cover;
            /* Faz a imagem preencher os 4 cantos da carta */
            object-position: center;
            /* Centraliza a imagem dentro do espa√ßo */
            border-radius: 10px;
            /* Mant√©m as bordas arredondadas, se necess√°rio */
        }

        .card-container {
            perspective: 1000px;
            margin: 10px;
        }

        .card {
            width: 300px;
            height: 400px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .card .front,
        .card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border: 2px solid #000;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .card .back {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            transform: rotateY(180deg);
        }

        .card .back .card-name {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            cursor: pointer;
        }

        .card .back .card-text {
            font-size: 10px;
            margin-top: 20px;
        }

        .flipped .card {
            transform: rotateY(180deg);
        }

        /* Bot√£o para adicionar carta */
        #add-card-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #add-card-btn:hover {
            background-color: #2980b9;
        }

        /* ################ FIM CARD ################### */

        .welcome-message {
            animation: fadeIn 1.5s ease;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            padding: 30px;
            background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%) transparent;
            color: #fff;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            z-index: 9999;
        }

        .welcome-message h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .welcome-message p {
            font-size: 1.2em;
            line-height: 1.6;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #welcome-message button:hover {
            background-color: #ff0000;
        }

        #close-welcome {
            position: absolute;
            bottom: 15px;
            right: 20px;
            background: transparent;
            border: 4px solid #0fe;
            border-radius: 15px;
            font-size: 18px;
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }

        /* ##########3 USER LIST ########### */



        .user-section {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            background: #002238;
            border: #0fe 1px solid;
            border-radius: 5px;
            width: 100%;
            height: 20%;
            padding: 12px 16px;
            box-sizing: border-box;
            overflow: hidden;
            justify-content: center;
            /* Centraliza horizontalmente */
        }

        .user-info {
            display: flex;
            align-items: center;
            flex-shrink: 1;
            /* permite encolher se necess√°rio */
            min-width: 0;
            /* necess√°rio para text-overflow funcionar */
        }


        #user-display {
            color: white;
            font-size: 100%;
            cursor: pointer;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            text-align: center;
            padding: 8px 12px;
            /* Valor fixo mais seguro */
        }





        .dropdown {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            /* Alinha o conte√∫do √† esquerda */
            width: auto;
            height: auto;
        }

        .dropbtn {
            display: flex;
            align-items: center;
            color: white;
            font-size: 26px;
            border: none;
            cursor: pointer;
            background: none;
            padding: 0;
            gap: 10px;
            /* Espa√ßo entre a imagem e o texto */
        }


        .user-icon {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
            margin-right: 12px;
            flex-shrink: 0;
            /* √≠cone nunca encolhe */
        }





        .dropdown {
            margin: auto;
            align-content: center;
            align-items: center;
            align-self: center !important;
        }

        /* Estilo para a lista de usu√°rios */
        #user-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1%;
            margin-top: 1%;
            padding: 1%;
            width: 100%;
            max-height: 30vh;
            box-sizing: border-box;
            overflow-y: auto;
            /* ‚¨ÖÔ∏è Ativa rolagem vertical */
            overflow-x: hidden;
            /* ‚¨ÖÔ∏è Oculta horizontal */

            /* Esconde a barra visualmente */
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE e Edge */
        }

        #user-list::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, Edge (novos) */
        }


        /* Estilo para o item da lista de usu√°rios */
        .user-list-item {
            flex: 1 1 10%;
            /* Tenta ocupar 30%, mas pode quebrar */
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1%;
            margin: 1%;
            border: 1px solid #009dff;
            border-radius: 8px;
            width: 100%;
            max-height: 80vh;
        }


        /* Estilo para o √≠cone do usu√°rio */
        .user-icon-friends {
            width: 20px;
            /* Ajusta o tamanho da imagem */
            height: 20px;
            /* Ajusta o tamanho da imagem */
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
            /* Garante que a imagem n√£o encolha */
        }

        /* Estilo para o nome do usu√°rio */
        .user-list-item li {
            background: linear-gradient(135deg, var(--color1), var(--color2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
            padding: 1%;
            font-size: 14px;
            /* Reduz o tamanho da fonte para n√£o ficar muito grande */
            white-space: nowrap;
            /* Impede a quebra do texto */
            overflow: hidden;
            /* Garante que o texto n√£o ultrapasse o limite */
            text-overflow: ellipsis;
            /* Adiciona "..." se o texto for muito longo */
            justify-content: center;

        }

        #user-list-item img {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            justify-content: end;
        }

        /* Estilo de hover para os itens da lista */
        #user-list span:hover {
            background-color: #3498db;
        }

        /* Estilo do span contendo o item */
        #user-list span {
            display: flex;
            justify-content: flex-start;
            /* Alinha itens √† esquerda */
            align-items: center;
            /* Alinha verticalmente */
            box-sizing: border-box;
            height: auto;
            /* Ajusta a altura automaticamente */
        }


        #search-bar {
            border: 1px solid rgba(15, 79, 119, 0.747);

            background: rgba(9, 52, 78, 0.747);
            border-radius: 5px;
            color: white;
            width: 100%;
            /* üî• Faz ocupar toda a sidebar */
            padding: 8px;
            box-sizing: border-box;
            margin-top: 1%;
        }

        #search-bar::placeholder {
            color: rgba(255, 255, 255, 0.288);
            /* Rosa, por exemplo */
        }

        #search-bar:focus {
            outline: none;
            border: 1px solid #009dff;
        }

        .user-list-panel {
            width: 98%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Centraliza horizontalmente */
            padding: 1%;
            background: #002238;
            border: #0fe 1px solid;
            border-radius: 5px;
        }


        /* ##########3 USER LIST ########### */



.dropdown-content {
    display: none;
    position: absolute;
    width: 10%;
    background-color: #1f2a38;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    overflow: hidden;
    border: 1px solid #2c3e50;
    animation: fadeIn 0.2s ease-in-out;
}

.dropdown-content button {
    width: 100%;
    background: transparent;
    border: none;
    text-align: center;
    font-size: 14px;
    color: #ecf0f1;

    transition: background-color 0.2s ease;

}

.dropdown-content button:hover {
    background-color: #34495e;
}

        .show {
            display: block;
        }

        #background-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* faz a imagem cobrir toda a √°rea sem distorcer */
            z-index: 0;
            /* garante que fique atr√°s do conte√∫do */
        }

        .context-menu {
    position: absolute;
    background-color: #1f2a38;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    display: none;
    flex-direction: column;
    z-index: 1000;
    border: 1px solid #2c3e50;
    padding: 4px 0;
    animation: fadeIn 0.2s ease-in-out;
}

.context-menu button {
    padding: 10px 16px;
    background-color: transparent;
    border: none;
    color: #ecf0f1;
    text-align: left;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s ease;
}

.context-menu button:hover {
    background-color: #34495e;
}

.submenu {
    position: relative;
}

.submenu-options {
    position: absolute;
    top: 100%; /* Para que o submenu apare√ßa abaixo do item pai */
    left: 0; /* Para alinhar o submenu √† esquerda do item pai */
    background-color: #1f2a38; /* Cor de fundo escura */
    border-radius: 8px; /* Bordas arredondadas */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* Sombra suave */
    display: none; /* Inicialmente escondido */
    flex-direction: column; /* Organizar os itens verticalmente */
    z-index: 1000; /* Garante que o submenu fique acima de outros elementos */
    border: 1px solid #2c3e50; /* Borda sutil */
    padding: 4px 0; /* Espa√ßamento interno vertical */
    animation: fadeIn 0.2s ease-in-out; /* Adiciona uma pequena anima√ß√£o ao aparecer */
    min-width: 150px; /* Defina uma largura m√≠nima para o submenu */
}

.submenu:hover .submenu-options {
    display: flex; /* Exibe o submenu ao passar o mouse no item pai */
}

.submenu-options button {
    padding: 10px 16px; /* Espa√ßamento interno nos bot√µes */
    background-color: transparent; /* Fundo transparente para herdar a cor do submenu */
    border: none; /* Remove a borda padr√£o dos bot√µes */
    color: #ecf0f1; /* Cor do texto clara */
    text-align: left; /* Alinha o texto √† esquerda */
    cursor: pointer; /* Indica que √© clic√°vel */
    font-size: 14px; /* Tamanho da fonte */
    transition: background-color 0.2s ease; /* Transi√ß√£o suave ao passar o mouse */
    width: 100%; /* Faz os bot√µes ocuparem toda a largura do submenu */
}

.submenu-options button:hover {
    background-color: #34495e; /* Cor de fundo ao passar o mouse */
}

        .content-container {
            display: none;
            width: 100%;
            height: 100%;
            overflow: auto;
            padding: 20px;
            box-sizing: border-box;
            /* Inclui padding no c√°lculo da largura */
        }

        .active {
            display: block;
        }


        /* #############3 EDIT LAYOUT ############## */
        /* Estilo para o container */
        #editlayout {
            position: fixed;
            /* Fixo na tela */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* Centraliza certinho */
            width: 50%;
            max-height: 90%;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.95);
            /* Fundo branco com transpar√™ncia */
            z-index: 10000;
            /* Fica acima de tudo */
            display: none;
            /* Come√ßa escondido */
            padding: 20px;
            box-sizing: border-box;
            border-radius: 10px;
            box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.2);
        }

        #editlayout.active {
            display: block;
        }


        /* Estilo para os t√≠tulos */
        #editlayout h2 {
            font-size: 24px;
            color: #3498db;
            margin-bottom: 20px;
            text-align: center;
        }

        #editlayout h3 {
            font-size: 20px;
            color: #2ecc71;
            margin-top: 30px;
            margin-bottom: 10px;
        }

        /* Estilo para os labels */
        #editlayout label {
            display: block;
            font-size: 14px;
            color: #333;
            margin-bottom: 5px;
            font-weight: bold;
        }

        /* Estilo para os inputs de texto */
        #editlayout input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Estilo para os inputs de cor */
        #editlayout input[type="color"] {
            width: 50px;
            height: 30px;
            border: none;
            cursor: pointer;
            margin-right: 10px;
        }

        /* Estilo para os inputs de range */
        #editlayout input[type="range"] {
            width: 100%;
            margin: 10px 0;
            cursor: pointer;
        }

        /* Estilo para os bot√µes */
        #editlayout button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px 5px;
            font-size: 14px;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #editlayout button:hover {
            background: linear-gradient(135deg, #2ecc71, #3498db);
            transform: scale(1.05);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        #editlayout button:focus {
            outline: none;
            box-shadow: 0 0 8px rgba(50, 152, 219, 0.8);
        }

        /* Estilo para os spans */
        #editlayout span {
            font-size: 14px;
            color: #555;
            margin-left: 10px;
            font-weight: bold;
        }

        /* #############3 EDIT LAYOUT ############## */



        /* ################################ CHAT BOX ################### */
        #chat-box {
            display: flex;
            flex-direction: column;

            width: 100%;
            height: 100%;
            background: #002238;
            border: #0fe 1px solid;
            color: rgb(255, 255, 255);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            overflow: hidden;
            margin-top: auto;
        }

        #chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 10px;
            font-size: 14px;
            padding-right: 5px;
        }

        #chat-input {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 8px;
            width: 100%;
            box-sizing: border-box;
        }

        #chat-box button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            margin-left: 5px;
            cursor: pointer;
        }

        .timestamp{
            font-size: 80%;
            color: #ffffff44;
        }

        /* ############################### FIM CHAT BOX ########################*/
    </style>
</head>

<body>

    <!-- Formul√°rio de Login -->
    <div id="login-container" class="content-container active">
        <div class="white-box">
            <h2>Login</h2>
            <input type="text" id="login-username" placeholder="Usu√°rio">
            <input type="password" id="login-password" placeholder="Senha">
            <button onclick="login()">Entrar</button>
            <p>N√£o tem uma conta? <a href="#" onclick="showRegister()">Registre-se</a></p>
        </div>
    </div>

    <!-- Formul√°rio de Registro -->
    <div id="register-container" class="content-container hidden">
        <div class="white-box">
            <h2>Registrar</h2>
            <input type="text" id="register-username" placeholder="Usu√°rio">
            <input type="password" id="register-password" placeholder="Senha">
            <button onclick="register()">Registrar</button>
            <p>J√° tem uma conta? <a href="#" onclick="showLogin()">Fa√ßa login</a></p>
        </div>
    </div>

    <div id="crop-modal"
        style="display: none; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 9999; justify-content: center; align-items: center;">
        <div style="background: white; padding: 20px; border-radius: 10px; position: relative;">
            <h3>Editar imagem</h3>
            <div style="width: 300px; height: 400px; overflow: hidden; position: relative; border: 1px solid #000;">
                <img id="editable-img" src="https://upload.wikimedia.org/wikipedia/en/e/e2/NFS_High_Stakes_box.jpg"
                    style="position: absolute; cursor: grab; width: auto; height: 100%; transform-origin: center center; transform: scale(1); left: 0px; top: 0px;">
            </div>
            <input id="zoom-range" type="range" min="0.3" max="2" step="0.01" value="1"
                style="width: 100%; margin-top: 10px;">
            <button onclick="applyCrop()">Aplicar</button>
            <button onclick="closeModal()">Cancelar</button>
        </div>
    </div>

    <div class="welcome-message" id="welcome-message" style="display: none;">
        <h1>Seja muito bem-vindo(a) ao Card Flip!</h1>
        <p>
            Estamos muito felizes em ter voc√™ aqui com a gente! üéâ<br>
            O Card Flip √© o seu espa√ßo para registrar todas as suas aventuras üéÆüìöüé•<br>
            Descubra tamb√©m o que seus amigos j√° curtiram e compartilhe suas pr√≥prias conquistas de entretenimento!<br>
            Comece agora a construir sua cole√ß√£o e explore novas hist√≥rias incr√≠veis! üöÄ‚ú®
        </p>
        <button id="close-welcome" onclick="fecharboasvindas()">Fechar</button>
    </div>


    <div class="grid-container" id="gridContainer">
        <div class="header">
            <nav id="navbar" class="navigation hidden">
                <a href="#" onclick="showSession('filmes')">Filmes</a>
                <a href="#" onclick="showSession('jogos')">Jogos</a>
                <a href="#" onclick="showSession('livros')">Livros</a>
                <a href="#" onclick="showSession('animes')">Animes</a>
                <a href="#" onclick="showSession('kids')">Kids</a>
                <a href="#" onclick="showSession('series')">S√©ries</a>
            </nav>

            <button class="toggle-button" onclick="toggleSidebar()">Amigos</button>




        </div>
        <div class="content">
            <img id="background-image" src="">
            <div id="filmes" class="content-container hidden">
                <div class="scroll-container" id="scroll-container-filmes">
                    <div class="card-row" id="card-row-filmes">
                        <!-- Cartas de filmes v√£o aqui -->
                    </div>
                </div>
                <button id="add-card-filmes" class="hidden" onclick="addCard('filmes')">Adicionar Carta de
                    Filme</button>
            </div>

            <div id="jogos" class="content-container hidden">
                <div class="scroll-container" id="scroll-container-jogos">
                    <div class="card-row" id="card-row-jogos">
                        <!-- Cartas de jogos v√£o aqui -->
                    </div>
                </div>
                <button id="add-card-jogos" class="hidden" onclick="addCard('jogos')">Adicionar Carta de Jogo</button>
            </div>

            <div id="livros" class="content-container hidden">
                <div class="scroll-container" id="scroll-container-livros">
                    <div class="card-row" id="card-row-livros">
                        <!-- Cartas de livros v√£o aqui -->
                    </div>
                </div>
                <button id="add-card-livros" class="hidden" onclick="addCard('livros')">Adicionar Carta de
                    Livro</button>
            </div>

            <div id="animes" class="content-container hidden">
                <div class="scroll-container" id="scroll-container-animes">
                    <div class="card-row" id="card-row-animes">
                        <!-- Cartas de animes/cartoons v√£o aqui -->
                    </div>
                </div>
                <button id="add-card-animes" class="hidden" onclick="addCard('animes')">Adicionar Carta de
                    Anime/Cartoon</button>
            </div>

            <div id="kids" class="content-container hidden">
                <div class="scroll-container" id="scroll-container-kids">
                    <div class="card-row" id="card-row-kids">
                        <!-- Cartas de kids v√£o aqui -->
                    </div>
                </div>
                <button id="add-card-kids" class="hidden" onclick="addCard('kids')">Adicionar Carta de kids</button>
            </div>

            <div id="series" class="content-container hidden">
                <div class="scroll-container" id="scroll-container-series">
                    <div class="card-row" id="card-row-series">
                        <!-- Cartas de s√©ries v√£o aqui -->
                    </div>
                </div>
                <button id="add-card-series" class="hidden" onclick="addCard('series')">Adicionar Carta de
                    S√©rie</button>
            </div>
            <div id="context-menu" class="context-menu">
                <button class="BotaoDireitoMouse" onclick="editCard('name')">Editar Nome</button>
                <button class="BotaoDireitoMouse" onclick="editCard('comment')">Editar Coment√°rio</button>
                <button class="BotaoDireitoMouse" onclick="editCard('image')">Editar Imagem</button>
                <button class="BotaoDireitoMouse" onclick="editCardCrop()">Editar Crop</button>
                <button class="BotaoDireitoMouse" onclick="deleteCard()">Excluir</button>
                <div class="BotaoDireitoMouse submenu">
                    <button>Mover para Outra Sess√£o</button>
                    <div class="submenu-options hidden">
                        <button onclick="moveCardTo('filmes')">Filmes</button>
                        <button onclick="moveCardTo('jogos')">Jogos</button>
                        <button onclick="moveCardTo('livros')">Livros</button>
                        <button onclick="moveCardTo('animes')">Animes/Cartoons</button>
                        <button onclick="moveCardTo('kids')">Kids</button>
                        <button onclick="moveCardTo('series')">S√©ries</button>
                    </div>
                </div>
                <div class="BotaoDireitoMouse submenu">
                    <button class="BotaoDireitoMouse hidden" id="atribuir-trofeu-btn" style="width: 100%;">Atribuir
                        Trof√©u</button>
                    <div class="submenu-options hidden">
                        <button onclick="atribuirTrofeu('platina')" style="position: relative;">
                            100%
                            <img id="trofeu-img-ouro" alt="Platinado"
                                style="width: 20px; height: 20px; position: absolute; right: 10%; top: 50%; transform: translateY(-50%);">
                        </button>

                        <button onclick="atribuirTrofeu('zerado')" style="position: relative;">
                            Zerado
                            <img id="trofeu-img-prata" alt="Zerado"
                                style="width: 20px; height: 20px; position: absolute; right: 10%; top: 50%; transform: translateY(-50%);">
                        </button>

                        <button onclick="atribuirTrofeu('jogado')" style="position: relative;">
                            Jogado
                            <img id="trofeu-img-bronze" alt="Jogado"
                                style="width: 20px; height: 20px; position: absolute; right: 10%; top: 50%; transform: translateY(-50%);">
                        </button>
                        <button class="removertrofeu" onclick="removerTrofeu()">Remover Trof√©u</button>

                    </div>

                </div>
                <button class="copiarCard hidden" onclick="copyCardToMyProfile()">Copiar Card</button>
            </div>
        </div>
        <div class="sidebar">
            <!-- Se√ß√£o do usu√°rio -->
            <div class="user-section" onclick="toggleDropdown()">
                <img id="user-icon" src="..." alt="Usu√°rio" class="user-icon">

                <span id="user-display">Nome do Usu√°rio</span>

                <div id="dropdownMenu" class="dropdown-content">
                    <button onclick="event.stopPropagation(); showSession('editlayout')">üìù Editar Layout</button>
                    <button onclick="event.stopPropagation(); confirmDeleteAccount()">üóëÔ∏èExcluir Conta</button>
                    <button onclick="event.stopPropagation(); logout()">üö∂Logout</button>
                </div>
            </div>


            <div class="user-list-panel">
                <input type="text" id="search-bar" placeholder="Pesquisar usu√°rios...">
                <ul id="user-list"></ul>
            </div>
            <!-- Caixa de mensagens -->
            <div id="chat-box">
                <div id="chat-messages"></div>
                <input type="text" id="chat-input" placeholder="Digite sua mensagem..."
                    onkeydown="if(event.key==='Enter') sendMessage()">

            </div>
        </div>


        <div class="footer">

            <div class="trofeus-container">
                <label id="trofeus-ouro" class="cont-trofeu hidden" style="color: gold;">0</label>
                <img id="trofeus-ouro-img" class="cont-trofeu hidden" alt="Trof√©u Ouro">

                <label id="trofeus-prata" class="cont-trofeu hidden" style="color: silver;">0</label>
                <img id="trofeus-prata-img" class="cont-trofeu hidden" alt="Trof√©u Prata">

                <label id="trofeus-bronze" class="cont-trofeu hidden" style="color: burlywood;">0</label>
                <img id="trofeus-bronze-img" class="cont-trofeu hidden" alt="Trof√©u Bronze">
            </div>
        </div>

    </div>

    <div id="editlayout" class="content-container hidden">
        <h2>Editar Layout</h2>
        <label for="background-url">URL da Imagem de Fundo:</label>
        <input type="text" id="background-url" placeholder="Digite a URL da imagem">
        <button onclick="previewBackground()">Pr√©-visualizar</button>
        <button onclick="removeImage()">Remover Imagem</button>
        <div id="editlayout-image"
            style="position: relative; width: 100%; height: 263px; overflow: hidden; border: 1px solid #ccc; margin-top: 10%;">
            <!-- Imagem de fundo ser√° aplicada via CSS -->
            <img id="editlayout-child" src=""
                style="position: absolute; cursor: grab; width: auto; height: 100%; transform-origin: center center; transform: scale(1); left: 0px; top: 0px;">
        </div>
        <label>Zoom da Imagem de Fundo:</label>
        <input id="editlayout-zoom" type="range" min="0.3" max="2" step="0.001" value="1">

        <br>
        <br>
        <label for="icon-url">URL do Icone:</label>
        <input type="text" id="icon-Url" placeholder="Digite a URL da imagem">
        <button onclick="removeIcon()">Remover Icone</button>
        <button onclick="resetarIcone()">Resetar posi√ß√£o do Icone</button>
        <div style="display: flex; align-items: flex-start;">
            <div id="editicon"
                style="width: 1000px; height: 400px; overflow: hidden; position: relative; border: 1px solid #000;">
                <!-- Imagem de fundo ser√° aplicada via CSS -->
                <img id="editicon-child" src=""
                    style="position: absolute; cursor: grab; width: auto; height: 100%; transform-origin: center center; transform: scale(1); left: 0px; top: 0px;">
            </div>
            <label style="margin-left: 50px; max-width: 300px;">Para alterar o local do Icone, mexa no icone na Barra,
                posicione aonde voc√™ quer e Salve.</label>

        </div>
        <!--<label>Tamanho do √çcone:</label>-->
        <!--<input id="icon-zoom" type="range" min="0.3" max="2" step="0.01" value="1"> -->

        <h3>Alterar Cor de Fundo</h3>
        <div style="display: flex; align-items: center;">
            <label for="background-color1">Cor 1:</label>
            <input type="color" id="background-color1" value="#ffffff">
            <label for="background-color2">Cor 2 (opcional):</label>
            <input type="color" id="background-color2" value="#ffffff">

        </div>
        <h3>Estilo do Nome do Usu√°rio</h3>
        <div style="display: flex; align-items: center; gap: 10px;">
            <label for="user-gradient-color1">Cor 1:</label>
            <input type="color" id="user-gradient-color1" value="#ffffff">
            <label for="user-gradient-color2">Cor 2:</label>
            <input type="color" id="user-gradient-color2" value="#ffffff">
            <label for="user-border-color">Cor da Borda:</label>
            <input type="color" id="user-border-color" value="#000000">
        </div>

        <h3>Personalizar Bot√µes</h3>
        <div style="display: flex; align-items: center;">
            <div style="display: flex; align-items: center;">
                <label for="button-bg-color">Cor de Fundo:</label>
                <input type="color" id="button-bg-color" value="#3498db">
            </div>
            <div style="display: flex; align-items: center;">
                <label for="button-hover-bg-color">Cor de Fundo:</label>
                <input type="color" id="button-hover-bg-color" value="#2ecc71">
            </div>
            <div style="display: flex; align-items: center;">
                <label for="button-text-color">Cor do Texto:</label>
                <input type="color" id="button-text-color" value="#ffffff">
            </div>
        </div>
        <br>
        <div style="display: flex; align-items: center;">
            <label for="button-border-radius">Borda Arredondada (px):</label>
            <span id="button-border-radius-value">25px</span>
        </div>
        <input type="range" id="button-border-radius" min="0" max="50" value="25" oninput="updateButtonPreview()">
        <div style="display: flex; align-items: center;">
            <label for="button-width">Largura do Bot√£o (px):</label>
            <span id="button-width-value">150px</span>
        </div>
        <input type="range" id="button-width" min="50" max="300" value="150" oninput="updateButtonPreview()">
        <div style="display: flex; align-items: center;">
            <label for="button-height">Altura do Bot√£o (px):</label>
            <span id="button-height-value">40px</span>
        </div>
        <input type="range" id="button-height" min="20" max="100" value="40" oninput="updateButtonPreview()">
        <button id="savebackground" onclick="saveBackground()">Salvar BackGround</button>
    </div>
</body>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<script>
    // ################## ROTINAS $ VARIAVEIS GLOBAIS #################//


    let currentUser = null; // Vari√°vel global para armazenar o usu√°rio logado

    // Configura√ß√£o do Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyCvMTjow03ppCTtOZAqbGdEQE63kgh66J8",
        authDomain: "animes-list01.firebaseapp.com",
        databaseURL: "https://animes-list01-default-rtdb.firebaseio.com",
        projectId: "animes-list01",
        storageBucket: "animes-list01.appspot.com",
        messagingSenderId: "1072792842054",
        appId: "1:1072792842054:web:12b49d8e7160f82de97f47",
        measurementId: "G-6VX3Z36RQ9"
    };



    // Vari√°vel global para armazenar o cart√£o selecionado
    let selectedCard = null;
    let selectedImg = null;
    let posX = 0, posY = 0;
    let startX, startY;
    let isDragging = false;

    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    let trofeus = {
        bronze: 'data:image/png;base64,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',
        prata: 'data:image/png;base64,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',    // idem
        ouro: 'data:image/png;base64,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'    // idem
    };
    document.getElementById('trofeus-ouro-img').src = trofeus.ouro;
    document.getElementById('trofeus-prata-img').src = trofeus.prata;
    document.getElementById('trofeus-bronze-img').src = trofeus.bronze;

    document.getElementById('trofeu-img-ouro').src = trofeus.ouro;
    document.getElementById('trofeu-img-prata').src = trofeus.prata;
    document.getElementById('trofeu-img-bronze').src = trofeus.bronze;

    document.addEventListener("DOMContentLoaded", () => {
        const storedUser = localStorage.getItem("currentUser");

        if (storedUser) {
            currentUser = storedUser;

            const usuarioRef = database.ref(`usuarios/${currentUser}/welcome/boasvindas`);
            usuarioRef.once("value").then((snapshot) => {
                const boasVindas = snapshot.val();
                document.getElementById('welcome-message').style.display = boasVindas ? 'none' : 'block';
            });

            // Atualizar o nome do usu√°rio na barra
            document.getElementById("user-display").textContent = `${currentUser}`;

            // Mostrar elementos de usu√°rio logado
            document.getElementById("navbar").classList.remove("hidden");
            ["filmes", "jogos", "livros", "animes", "kids", "series"].forEach((id) => {
                document.getElementById(id).classList.remove("hidden");
                document.getElementById(`add-card-${id}`).classList.remove("hidden");
            });

            // Ocultar os formul√°rios de login e registro
            document.getElementById("login-container").classList.add("hidden");
            document.getElementById("register-container").classList.add("hidden");

            // Carregar sess√µes e configura√ß√µes
            loadAllSessions();
            loadBackground();
            loadUserList();
            makeDraggableZoomable("background-image", "icon-zoom");
            // makeDraggableZoomable("user-icon", "icon-zoom");
            makeDraggableZoomable("editlayout-child", "editlayout-zoom");
            makeDraggableZoomable("editicon-child", "icon-zoom");

        } else {
            // Mostrar apenas o formul√°rio de login
            document.getElementById("login-container").classList.remove("hidden");
            document.getElementById("login-container").classList.add("active");

            document.getElementById("register-container").classList.add("hidden");
            document.getElementById("register-container").classList.remove("active");
        }
    });

    // Ocultar o menu de contexto ao clicar fora
    document.addEventListener("click", () => {
        const contextMenu = document.getElementById("context-menu");
        contextMenu.style.display = "none";
    });

    document.addEventListener("DOMContentLoaded", () => {
        const contextMenu = document.getElementById("context-menu");

        // Mostrar o menu de contexto ao clicar com o bot√£o esquerdo
        document.addEventListener("click", (event) => {
            const isContextMenu = event.target.closest("#context-menu");
            if (isContextMenu) return;

            contextMenu.style.display = "none"; // Ocultar o menu ao clicar fora
        });

        document.addEventListener("contextmenu", (event) => {
            event.preventDefault();
            contextMenu.style.display = "flex";
            contextMenu.style.left = `${event.pageX}px`;
            contextMenu.style.top = `${event.pageY}px`;
        });

        // Mostrar submenu ao clicar no bot√£o "Mover para Outra Sess√£o"
        const submenuButton = document.querySelector(".submenu > button");
        const submenuOptions = document.querySelector(".submenu-options");

        submenuButton.addEventListener("click", (event) => {
            event.stopPropagation();
            submenuOptions.classList.toggle("hidden");
        });
    });

    document.addEventListener('click', () => {
        document.getElementById('context-menu').style.display = 'none';
    });

    firebase.database().ref("messages").orderByKey().on("child_added", function (snapshot) {
        const msg = snapshot.val();
        const messagesDiv = document.getElementById("chat-messages");

        // Verifica se o estilo de gradiente existe e ajusta a forma de aplica√ß√£o
        const gradientStyle = msg.style
            ? `background: ${msg.style}; -webkit-background-clip: text; color: transparent;`
            : 'font-weight: bold;';

        const messageElement = document.createElement("div");
        messageElement.innerHTML = `
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <div>
      <strong style="${gradientStyle}">${msg.user}:</strong> ${msg.text}
    </div>
    <span class="timestamp">${msg.timestamp || ""}</span>
  </div>
`;


        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });






    // ################## ROTINAS & VARIAVEIS GLOBAIS #################//
</script>
<script>
    //###############  FUNCOES ###############//

    function toggleSidebar() {
        const container = document.getElementById('gridContainer');
        container.classList.toggle('sidebar-hidden');
    }
    // Fun√ß√£o para alternar entre sess√µes
    function showSession(session) {
        console.log("Sess√£o selecionada:", session);
        const sections = ["filmes", "jogos", "livros", "animes", "kids", "series", "editlayout"];
        sections.forEach((s) => {
            const sectionContainer = document.getElementById(s);
            if (sectionContainer) {
                if (s === session) {
                    sectionContainer.classList.add("active");
                    sectionContainer.classList.remove("hidden");
                } else {
                    sectionContainer.classList.remove("active");
                    sectionContainer.classList.add("hidden");
                }
            }
        });
        // Verificar se est√° na sess√£o de jogos
        const controfeus = document.getElementsByClassName("cont-trofeu");
        if (session === "jogos") {
            for (let i = 0; i < controfeus.length; i++) {
                controfeus[i].classList.remove("hidden");
            }
        } else {
            for (let i = 0; i < controfeus.length; i++) {
                controfeus[i].classList.add("hidden");
            }
        }
    }

    // Fun√ß√£o para adicionar novo cart√£o ao Firebase e √† interface
    function addCard(session) {
        if (!currentUser) {
            alert("Voc√™ precisa estar logado para adicionar um cart√£o.");
            return;
        }

        const name = prompt("Digite o nome:");
        const comment = prompt("Digite o coment√°rio:");
        const image = prompt("Digite a URL da imagem:");

        if (name && comment && image) {
            const cardData = { name, comment, image };

            // Substituir espa√ßos no nome por underscores e usar como ID
            const cardID = name.replace(/\s+/g, '_').toLowerCase();

            // Refer√™ncia ao Firebase com o nome como chave
            const ref = database.ref(`usuarios/${currentUser}/${session}/${cardID}`);
            ref.set(cardData)
                .then(() => {
                    const cardRow = document.getElementById(`card-row-${session}`);
                    cardRow.appendChild(createCard(cardData, cardID));
                    alert("Cart√£o adicionado com sucesso!");
                })
                .catch((error) => {
                    console.error("Erro ao adicionar cart√£o:", error);
                    alert("Erro ao adicionar cart√£o.");
                });
        } else {
            alert("Todos os campos s√£o obrigat√≥rios!");
        }
    }

    // Carregar todas as sess√µes ao iniciar
    function loadAllSessions() {
        ["filmes", "jogos", "livros", "animes", "kids", "series"].forEach((session) => loadCards(session));
    }

    // Fun√ß√£o para virar a carta ao clicar
    function flipCard(event) {
        const card = event.currentTarget;
        card.classList.toggle("flipped");
    }

    // Mostrar menu de contexto (bot√£o direito)
    // Mostrar menu de contexto (bot√£o direito)
    function showContextMenu(event) {
        event.preventDefault();
        const contextMenu = document.getElementById("context-menu");
        contextMenu.style.display = "flex";
        contextMenu.style.left = `${event.pageX}px`;
        contextMenu.style.top = `${event.pageY}px`;
        selectedCard = event.currentTarget; // Guardar refer√™ncia ao cart√£o

        // Verificar se est√° na sess√£o de jogos
        const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-jogos"
        const session = cardRowId.split("-")[2]; // Ex: "jogos"
        const atribuirTrofeuBtn = document.getElementById("atribuir-trofeu-btn");
        if (session === "jogos") {
            atribuirTrofeuBtn.classList.remove("hidden");
        } else {
            atribuirTrofeuBtn.classList.add("hidden");

        }
    }


    // Fun√ß√£o para atribuir trof√©u
    // Fun√ß√£o para atribuir trof√©u
    function atribuirTrofeu(tipo) {
        if (selectedCard) {
            // Obter informa√ß√µes do cart√£o e do Firebase
            const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
            const session = cardRowId.split("-")[2]; // Ex: "animes"
            const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase
            if (!cardKey) {
                alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
                return;
            }
            const ref = database.ref(`usuarios/${currentUser}/${session}/${cardKey}`);
            ref.update({ trofeu: tipo })
                .then(() => {
                    alert(`Trof√©u "${tipo}" atribu√≠do com sucesso!`);
                })
                .catch((error) => {
                    console.error("Erro ao atribuir trof√©u:", error);
                });
        }
    }


    // Fun√ß√£o para editar um campo do cart√£o
    function editCard(field) {
        if (selectedCard) {
            // Obter informa√ß√µes do cart√£o e do Firebase
            const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
            const session = cardRowId.split("-")[2]; // Ex: "animes"
            const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase

            if (!cardKey) {
                alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
                return;
            }

            const ref = database.ref(`usuarios/${currentUser}/${session}/${cardKey}`);

            // Prompt para o novo valor
            let currentValue = "";
            if (field === "image") {
                const imgElement = selectedCard.querySelector(`.${field}`);
                currentValue = imgElement?.src || "";
            } else {
                const textElement = selectedCard.querySelector(`.${field}`);
                currentValue = textElement?.textContent || "";
            }
            const newValue = prompt(`Digite o novo valor para ${field}:`, currentValue);

            if (newValue) {
                // Atualizar no Firebase
                const updateData = { [field]: newValue };
                ref.update(updateData).then(() => {
                    // Atualizar na interface
                    const elementToUpdate = selectedCard.querySelector(`.${field}`);
                    if (field === "image") {
                        elementToUpdate.src = newValue;
                    } else {
                        elementToUpdate.textContent = newValue;
                    }
                    alert(`${field} atualizado com sucesso!`);
                }).catch((error) => {
                    alert(`Erro ao atualizar ${field}: ${error.message}`);
                });
            }
        }
    }

    function deleteCard() {
        if (selectedCard) {
            // Obter informa√ß√µes do cart√£o e do Firebase
            const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
            const session = cardRowId.split("-")[2]; // Ex: "animes"
            const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase

            if (!cardKey) {
                alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
                return;
            }

            const ref = database.ref(`usuarios/${currentUser}/${session}/${cardKey}`);

            // Confirmar exclus√£o
            if (confirm("Tem certeza de que deseja excluir este cart√£o?")) {
                ref.remove()
                    .then(() => {
                        selectedCard.remove(); // Remover da interface
                        alert("Cart√£o exclu√≠do com sucesso!");
                    })
                    .catch((error) => {
                        alert(`Erro ao excluir cart√£o: ${error.message}`);
                    });
            }
        }
    }

    // Criar cart√µes com a chave do Firebase
    function createCard(data, key) {

        const cardContainer = document.createElement("div");
        cardContainer.classList.add("card-container");
        cardContainer.setAttribute("onclick", "flipCard(event)");
        cardContainer.setAttribute("oncontextmenu", "showContextMenu(event)");
        cardContainer.setAttribute("data-key", key); // Armazena a chave do Firebase

        const card = document.createElement("div");
        card.classList.add("card");

        // Frente da carta
        const front = document.createElement("div");
        front.classList.add("front");
        const img = document.createElement("img");
        img.src = data.image || "https://via.placeholder.com/300x400";
        img.alt = data.name || "Frente da Carta";

        if (data.crop) {
            img.style.position = "absolute";
            img.style.height = "100%";
            img.style.width = "auto";
            img.style.left = data.crop.left || "0px";
            img.style.top = data.crop.top || "0px";
            img.style.transform = `scale(${data.crop.zoom || 1})`;
        }
        front.style.overflow = "hidden";
        front.appendChild(img);

        if (data.trofeu) {
            const trofeuImg = document.createElement("img");
            if (data.trofeu === "platina") {
                trofeuImg.src = trofeus.ouro; // ex: "imagens/platina.png"
            } else if (data.trofeu === "zerado") {
                trofeuImg.src = trofeus.prata; // ex: "imagens/zerado.png"
            } else if (data.trofeu === "jogado") {
                trofeuImg.src = trofeus.bronze; // ex: "imagens/jogado.png"
            }
            trofeuImg.alt = "external-trophy-reward-and-badges-justicon-flat-justicon-1";
            trofeuImg.style.position = "absolute";
            trofeuImg.style.bottom = "10px";
            trofeuImg.style.right = "10px";
            trofeuImg.style.width = "40px";  // Ajuste o tamanho conforme necess√°rio
            trofeuImg.style.height = "40px";
            trofeuImg.style.zIndex = "2";

            front.appendChild(trofeuImg);
        }

        // Verso da carta
        const back = document.createElement("div");
        back.classList.add("back");

        const cardName = document.createElement("h3");
        cardName.classList.add("name");
        cardName.style.color = "gold"
        cardName.textContent = data.name || "Nome Desconhecido";

        const cardText = document.createElement("div");
        cardText.classList.add("comment");
        cardText.textContent = data.comment || "Descri√ß√£o n√£o dispon√≠vel";

        back.appendChild(cardName);
        back.appendChild(cardText);
        card.appendChild(front);
        card.appendChild(back);
        cardContainer.appendChild(card);

        cardContainer.addEventListener('contextmenu', function (event) {
            event.preventDefault();
            selectedCard = this;
            selectedImg = this.querySelector('img');

            const menu = document.getElementById('context-menu');
            menu.style.top = `${event.clientY}px`;
            menu.style.left = `${event.clientX}px`;
            menu.style.display = 'block';
        });


        return cardContainer;


    }

    function moveCard(newSession) {
        if (!selectedCard) {
            alert("Nenhum cart√£o selecionado.");
            return;
        }

        // Obter informa√ß√µes do cart√£o e da sess√£o atual
        const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
        const currentSession = cardRowId.split("-")[2]; // Ex: "animes"
        const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase

        if (!cardKey) {
            alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
            return;
        }

        if (!newSession || !["filmes", "jogos", "livros", "animes", "kids", "series", "editlayout"].includes(newSession)) {
            alert("Sess√£o inv√°lida.");
            return;
        }

        // Refer√™ncia ao cart√£o no Firebase
        const currentRef = database.ref(`usuarios/${currentUser}/${currentSession}/${cardKey}`);
        const newRef = database.ref(`usuarios/${currentUser}/${newSession}/${cardKey}`);

        // Mover o cart√£o
        currentRef.once("value", (snapshot) => {
            const cardData = snapshot.val();
            if (cardData) {
                newRef.set(cardData) // Adicionar o cart√£o na nova sess√£o
                    .then(() => {
                        currentRef.remove() // Remover o cart√£o da sess√£o atual
                            .then(() => {
                                selectedCard.remove(); // Remover da interface
                                alert("Cart√£o movido com sucesso!");
                            })
                            .catch((error) => {
                                console.error("Erro ao remover o cart√£o da sess√£o atual:", error);
                            });
                    })
                    .catch((error) => {
                        console.error("Erro ao mover o cart√£o para a nova sess√£o:", error);
                    });
            } else {
                alert("Erro: N√£o foi poss√≠vel encontrar os dados do cart√£o.");
            }
        });
    }

    // Carregar cart√µes de uma sess√£o do Firebase

    // Carregar todas as sess√µes ao iniciar
    function loadAllSessions() {
        ["filmes", "jogos", "livros", "animes", "kids", "series", "editlayout"].forEach((session) => loadCards(session));
    }

    // Mostrar formul√°rio de registro
    function showRegister() {
        document.getElementById("login-container").classList.add("hidden");
        document.getElementById("login-container").classList.remove("active");
        document.getElementById("register-container").classList.remove("hidden");
        document.getElementById("register-container").classList.add("active");
    }

    function showLogin() {
        document.getElementById("register-container").classList.add("hidden");
        document.getElementById("register-container").classList.remove("active");
        document.getElementById("login-container").classList.remove("hidden");
        document.getElementById("login-container").classList.add("active");
    }

    // Registrar novo usu√°rio
    function register() {
        const username = document.getElementById("register-username").value;
        const password = document.getElementById("register-password").value;

        if (!username || !password) {
            alert("Preencha todos os campos!");
            return;
        }

        const ref = database.ref(`usuarios/${username}`);
        ref.once("value", (snapshot) => {
            if (snapshot.exists()) {
                alert("Usu√°rio j√° existe!");
            } else {
                ref.set({ senha: password })
                    .then(() => {
                        alert("Usu√°rio registrado com sucesso!");
                        showLogin();
                    })
                    .catch((error) => {
                        alert(`Erro ao registrar: ${error.message}`);
                    });
            }
        });
    }

    function loadCards(session) {
        if (!currentUser) {
            console.error("Nenhum usu√°rio est√° logado.");
            return;
        }

        const ref = database.ref(`usuarios/${currentUser}/${session}`);
        ref.once("value", (snapshot) => {
            const data = snapshot.val();
            const cardRow = document.getElementById(`card-row-${session}`);

            if (!cardRow) {
                console.warn(`Elemento com ID card-row-${session} n√£o encontrado.`);
                return;
            }

            cardRow.innerHTML = ""; // Limpar antes de adicionar

            if (data) {
                Object.entries(data).forEach(([key, cardData]) => {
                    cardRow.appendChild(createCard(cardData, key));
                });
            } else {
                console.log(`Nenhum cart√£o encontrado para a sess√£o: ${session}`);
            }
        }).catch((error) => {
            console.error(`Erro ao carregar cart√µes da sess√£o ${session}:`, error);
        });
    }


    function moveCard() {
        if (!selectedCard) {
            alert("Nenhum cart√£o selecionado.");
            return;
        }

        // Obter informa√ß√µes do cart√£o e da sess√£o atual
        const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
        const currentSession = cardRowId.split("-")[2]; // Ex: "animes"
        const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase

        if (!cardKey) {
            alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
            return;
        }

        // Refer√™ncia ao cart√£o no Firebase
        const currentRef = database.ref(`usuarios/${currentUser}/${currentSession}/${cardKey}`);
        const newRef = database.ref(`usuarios/${currentUser}/${newSession}/${cardKey}`);

        // Mover o cart√£o
        currentRef.once("value", (snapshot) => {
            const cardData = snapshot.val();
            if (cardData) {
                newRef.set(cardData) // Adicionar o cart√£o na nova sess√£o
                    .then(() => {
                        currentRef.remove() // Remover o cart√£o da sess√£o atual
                            .then(() => {
                                selectedCard.remove(); // Remover da interface
                                alert("Cart√£o movido com sucesso!");
                            })
                            .catch((error) => {
                                console.error("Erro ao remover o cart√£o da sess√£o atual:", error);
                            });
                    })
                    .catch((error) => {
                        console.error("Erro ao mover o cart√£o para a nova sess√£o:", error);
                    });
            } else {
                alert("Erro: N√£o foi poss√≠vel encontrar os dados do cart√£o.");
            }
        });
    }

    function moveCardTo(newSession) {
        if (!selectedCard) {
            alert("Nenhum cart√£o selecionado.");
            return;
        }

        // Obter informa√ß√µes do cart√£o e da sess√£o atual
        const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
        const currentSession = cardRowId.split("-")[2]; // Ex: "animes"
        const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase

        if (!cardKey) {
            alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
            return;
        }

        // Refer√™ncia ao cart√£o no Firebase
        const currentRef = database.ref(`usuarios/${currentUser}/${currentSession}/${cardKey}`);
        const newRef = database.ref(`usuarios/${currentUser}/${newSession}/${cardKey}`);

        // Mover o cart√£o
        currentRef.once("value", (snapshot) => {
            const cardData = snapshot.val();
            if (cardData) {
                newRef.set(cardData) // Adicionar o cart√£o na nova sess√£o
                    .then(() => {
                        currentRef.remove() // Remover o cart√£o da sess√£o atual
                            .then(() => {
                                selectedCard.remove(); // Remover da interface
                                alert(`Cart√£o movido para ${newSession} com sucesso!`);
                            })
                            .catch((error) => {
                                console.error("Erro ao remover o cart√£o da sess√£o atual:", error);
                            });
                    })
                    .catch((error) => {
                        console.error("Erro ao mover o cart√£o para a nova sess√£o:", error);
                    });
            } else {
                alert("Erro: N√£o foi poss√≠vel encontrar os dados do cart√£o.");
            }
        });
    }

    // Login do usu√°rio
    function login() {
        const username = document.getElementById("login-username").value;
        const password = document.getElementById("login-password").value;

        if (!username || !password) {
            alert("Preencha todos os campos!");
            return;
        }

        const ref = database.ref(`usuarios/${username}`);
        ref.once("value", (snapshot) => {
            if (snapshot.exists() && snapshot.val().senha === password) {
                alert("Login realizado com sucesso!");
                currentUser = username;

                // Salvar o usu√°rio no Local Storage
                localStorage.setItem("currentUser", currentUser);

                console.log("boasvindas", ref.welcome?.boasvindas);
                const usuarioRef = database.ref(`usuarios/${currentUser}/welcome/boasvindas`);
                usuarioRef.once("value").then((snapshot) => {
                    const boasVindas = snapshot.val();
                    document.getElementById('welcome-message').style.display = boasVindas ? 'none' : 'block';
                });

                // Atualizar o nome do usu√°rio na barra
                document.getElementById("user-display").textContent = `${currentUser}`;

                // Mostrar a barra de navega√ß√£o e as sess√µes
                document.getElementById("navbar").classList.remove("hidden");
                document.getElementById("filmes").classList.remove("hidden");
                document.getElementById("jogos").classList.remove("hidden");
                document.getElementById("livros").classList.remove("hidden");
                document.getElementById("animes").classList.remove("hidden");
                document.getElementById("kids").classList.remove("hidden");
                document.getElementById("series").classList.remove("hidden");

                // Mostrar os bot√µes de adicionar carta
                document.getElementById("add-card-filmes").classList.remove("hidden");
                document.getElementById("add-card-jogos").classList.remove("hidden");
                document.getElementById("add-card-livros").classList.remove("hidden");
                document.getElementById("add-card-animes").classList.remove("hidden");
                document.getElementById("add-card-kids").classList.remove("hidden");
                document.getElementById("add-card-series").classList.remove("hidden");

                // Ocultar o formul√°rio de login
                document.getElementById("login-container").classList.remove("active");
                document.getElementById("login-container").classList.add("hidden");
                document.getElementById("register-container").classList.remove("active");
                document.getElementById("register-container").classList.add("hidden");


                // Carregar os cart√µes do usu√°rio
                loadBackground();
                loadAllSessions();
                loadUserList();
                loadUserList();
                contarTrofeus(username);

            } else {
                alert("Usu√°rio ou senha incorretos!");
            }
        });
    }

    function logout() {
        // Remover o usu√°rio do Local Storage
        localStorage.removeItem("currentUser");

        // Redefinir a interface
        currentUser = null;
        document.getElementById("user-display").textContent = "";
        document.getElementById("navbar").classList.add("hidden");
        document.getElementById("filmes").classList.add("hidden");
        document.getElementById("jogos").classList.add("hidden");
        document.getElementById("livros").classList.add("hidden");
        document.getElementById("animes").classList.add("hidden");
        document.getElementById("kids").classList.add("hidden");
        document.getElementById("series").classList.add("hidden");

        // Mostrar o formul√°rio de login
        document.getElementById("login-container").classList.add("active");
        document.getElementById("login-container").classList.remove("hidden");

        // Recarregar a p√°gina para garantir que o estado seja atualizado
        location.reload();
    }

    function toggleDropdown(event) {
        // Evitar propaga√ß√£o do evento para o elemento pai
        if (event) {
            event.stopPropagation();
        }

        // Alternar a visibilidade do dropdown
        document.getElementById("dropdownMenu").classList.toggle("show");
    }

    // Fechar o dropdown se o usu√°rio clicar fora dele
    window.onclick = function (event) {
        if (!event.target.matches('.dropbtn') && !event.target.matches('#user-display')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            for (var i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    };

    function saveBackground() {
        const backgroundUrl = document.getElementById("background-url").value || "x"; // Enviar "x" se o campo estiver vazio
        const iconUrl = document.getElementById("icon-url").value || "x"; // Enviar "x" se o campo estiver vazio
        const color1 = document.getElementById("background-color1").value;
        const color2 = document.getElementById("background-color2").value;

        // Estilo dos bot√µes
        const bgColor = document.getElementById("button-bg-color").value;
        const hoverBgColor = document.getElementById("button-hover-bg-color").value;
        const textColor = document.getElementById("button-text-color").value;
        const borderRadius = document.getElementById("button-border-radius").value;
        const buttonWidth = document.getElementById("button-width").value;
        const buttonHeight = document.getElementById("button-height").value;

        const ref = database.ref(`usuarios/${currentUser}/background`);

        // Salvar os dados no Firebase
        ref.set({
            url: backgroundUrl,
            iconUrl: iconUrl,
            width: backgroundWidth || 100,
            height: backgroundHeight || 100,
            color1: color1 || null,
            color2: color2 || null,
            buttonStyle: {
                bgColor: bgColor || "#3498db",
                hoverBgColor: hoverBgColor || "#2ecc71",
                textColor: textColor || "#ffffff",
                borderRadius: borderRadius || 25,
                width: buttonWidth || 150,
                height: buttonHeight || 40
            }
        })
            .then(() => {
                alert("Imagem de fundo, segunda imagem e estilo dos bot√µes salvos com sucesso!");
                previewBackground(); // Aplicar a pr√©-visualiza√ß√£o ap√≥s salvar
            })
            .catch((error) => {
                console.error("Erro ao salvar os dados:", error);
                alert("Erro ao salvar os dados.");
            });
    }

    // Carregar a imagem de fundo ao iniciar
    function loadBackground(usuarioprocurado) {
        if (!currentUser) return;

        let ref = database.ref(`usuarios/${currentUser}/background`);
        if (usuarioprocurado != null) {
            ref = database.ref(`usuarios/${usuarioprocurado}/background`);
            console.log("Carregando dados de outro usu√°rio:", usuarioprocurado);
        }

        ref.once("value", (snapshot) => {
            const data = snapshot.val();
            if (data) {
                let backgroundStyle = "";

                // Adicionar a imagem de fundo, se existir
                if (data.url && data.url !== "x") {
                    backgroundStyle += `url('')`;

                    document.getElementById("gridContainer").getElementsByClassName("content").src = data.url;
                    document.getElementById("background-url").value = data.url;
                    document.getElementById("editlayout-child").src = data.url;
                } else {
                    document.getElementById("background-url").value = "";
                }

                // Adicionar a imagem de fundo, se existir
                if (data.iconUrl && data.iconUrl !== "x") {
                    document.getElementById("icon-Url").value = data.iconUrl;
                    document.getElementById("user-icon").src = data.iconUrl;
                    document.getElementById("editicon-child").src = data.iconUrl;
                } else {
                    document.getElementById("icon-Url").value = "";
                    document.getElementById("user-icon").src = "";
                    document.getElementById("editicon-child").src = "";
                }

                if (data.editlayout) {
                    const layoutImg = document.getElementById("editlayout-child");
                    layoutImg.style.top = data.editlayout.top || "0px";
                    layoutImg.style.left = data.editlayout.left || "0px";
                    layoutImg.style.transform = data.editlayout.zoom || "scale(1)";
                }

                // if (data.editicon) {
                //     const iconImg = document.getElementById("editicon-child");
                //     iconImg.style.top = data.editicon.top || "0px";
                //     iconImg.style.left = data.editicon.left || "0px";
                //     iconImg.style.transform = data.editicon.zoom || "scale(1)";
                // }

                // Adicionar a cor de fundo (gradiente ou s√≥lida)
                if (data.color1 && data.color2 && data.color1 !== data.color2) {
                    backgroundStyle += `, linear-gradient(135deg, ${data.color1}, ${data.color2})`;
                } else if (data.color1) {
                    backgroundStyle += `, ${data.color1}`;
                }

                // Aplicar o estilo combinado ao body
                //  document.body.style.background = backgroundStyle;
                // Pega o primeiro elemento com a classe "grid-container"
                var gridContainer = document.getElementsByClassName("grid-container")[0];

                // Define o background
                gridContainer.style.background = backgroundStyle;

                //document.body.iconUrl = iconUrl;


                // Atualizar os controles de fundo
                document.getElementById("background-color1").value = data.color1 || "#ffffff";
                document.getElementById("background-color2").value = data.color2 || "#ffffff";


                // Atualizar os controles de estilo dos bot√µes
                if (data.buttonStyle) {
                    document.getElementById("button-bg-color").value = data.buttonStyle.bgColor || "#3498db";
                    document.getElementById("button-hover-bg-color").value = data.buttonStyle.hoverBgColor || "#2ecc71";
                    document.getElementById("button-text-color").value = data.buttonStyle.textColor || "#ffffff";
                    document.getElementById("button-border-radius").value = data.buttonStyle.borderRadius || 25;
                    document.getElementById("button-width").value = data.buttonStyle.width || 150;
                    document.getElementById("button-height").value = data.buttonStyle.height || 40;

                    updateButtonPreview(); // Atualizar a pr√©-visualiza√ß√£o dos bot√µes
                }

                if (data.userNameStyle) {
                    document.getElementById("user-gradient-color1").value = data.userNameStyle.color1 || "#ffffff";
                    document.getElementById("user-gradient-color2").value = data.userNameStyle.color2 || "#ffffff";
                    document.getElementById("user-border-color").value = data.userNameStyle.border || "#000000";
                    applyUserDisplayStyle(); // aplica o estilo ao vivo
                }
                if (data.backgroundImg) {
                    const bgImg = document.getElementById("background-image");
                    bgImg.src = data.backgroundImg.url;
                    bgImg.style.left = data.backgroundImg.left || "0px";
                    bgImg.style.top = data.backgroundImg.top || "0px";
                    bgImg.style.transform = data.backgroundImg.zoom || "scale(1)";
                }

                // if (data.userIcon) {
                //     const icon = document.getElementById("user-icon");
                //     icon.src = data.userIcon.url;
                //     icon.style.left = data.userIcon.left || "0px";
                //     icon.style.top = data.userIcon.top || "0px";
                //     icon.style.transform = data.userIcon.zoom || "scale(1)";
                // }
            }
            applyLayoutCrop(data);

        }).catch((error) => {
            console.error("Erro ao carregar os dados:", error);
        });
    }

    // Chamar a fun√ß√£o para carregar a imagem de fundo ao carregar a p√°gina
    document.addEventListener("DOMContentLoaded", loadBackground);

    // Pr√©-visualizar a imagem de fundo
    function previewBackground() {
        const backgroundUrl = document.getElementById("background-url").value;
        const iconUrl = document.getElementById("user-icon").value;
        const color1 = document.getElementById("background-color1").value;
        const color2 = document.getElementById("background-color2").value;

        let backgroundStyle = "";

        // Adicionar a imagem de fundo, se fornecida
        if (backgroundUrl && backgroundUrl !== "x") {
            backgroundStyle += `url('${backgroundUrl}')`;
        }
        // Adicionar a imagem de fundo, se fornecida
        if (iconUrl && iconUrl !== "x") {
            backgroundStyle += `iconUrl('${iconUrl}')`;
        }


        // Adicionar a cor de fundo (gradiente ou s√≥lida)
        if (color1 && color2 && color1 !== color2) {
            backgroundStyle += `, linear-gradient(135deg, ${color1}, ${color2})`;
        } else if (color1) {
            backgroundStyle += `, ${color1}`;
        }

        // Aplicar o estilo combinado ao body
        document.body.style.background = backgroundStyle;
        if (iconUrl && iconUrl !== "x") {
            document.getElementById("user-icon").src = iconUrl;
        }

        // Ajustar o tamanho e repeti√ß√£o para cada camada
        if (backgroundUrl && backgroundUrl !== "x") {
            document.body.style.backgroundSize = "cover"; // Imagem: cover, Gradiente: 100% 100%
            document.body.style.backgroundRepeat = "no-repeat"; // Evitar repeti√ß√£o
            document.body.style.backgroundPosition = "center"; // Centralizar ambas as camadas
        } else {
            document.body.style.backgroundSize = "100% 100%"; // Apenas gradiente ou cor s√≥lida
            document.body.style.backgroundRepeat = "no-repeat"; // Evitar repeti√ß√£o
        }
    }

    ["background-color1", "background-color2"].forEach(id => {
        document.getElementById(id).addEventListener("input", previewBackgroundColor);
    });

    // Pr√©-visualizar a cor de fundo
    function previewBackgroundColor() {
        const color1 = document.getElementById("background-color1").value;
        const color2 = document.getElementById("background-color2").value;

        // Pega o primeiro elemento com a classe "grid-container"
        var gridContainer = document.getElementsByClassName("grid-container")[0];

        if (color1 && color2 && color1 !== color2) {
            // Aqui voc√™ precisa criar o backgroundStyle antes de usar
            var backgroundStyle = `linear-gradient(to right, ${color1}, ${color2})`;
            // Agora sim aplica
            gridContainer.style.background = backgroundStyle;
        } else {
            // Aplicar cor s√≥lida
            document.body.style.background = color1;
        }
    }


    // Salvar a cor de fundo no Firebase
    function saveBackground() {
        if (!currentUser) return;

        const backgroundUrl = document.getElementById("background-url").value;
        const iconUrl = document.getElementById("icon-Url").value;
        const color1 = document.getElementById("background-color1").value;
        const color2 = document.getElementById("background-color2").value;
        const buttonStyle = {
            bgColor: document.getElementById("button-bg-color").value,
            hoverBgColor: document.getElementById("button-hover-bg-color").value,
            textColor: document.getElementById("button-text-color").value,
            borderRadius: parseInt(document.getElementById("button-border-radius").value),
            width: parseInt(document.getElementById("button-width").value),
            height: parseInt(document.getElementById("button-height").value)
        };

        const editlayoutImg = document.getElementById("editlayout-child");
        const editiconImg = document.getElementById("editicon-child");

        const data = {
            url: backgroundUrl || "x",
            iconUrl: iconUrl || "x",
            color1,
            color2,
            buttonStyle,
            editlayout: {
                top: editlayoutImg.style.top || "0px",
                left: editlayoutImg.style.left || "0px",
                zoom: editlayoutImg.style.transform || "scale(1)"
            },
            // editicon: {
            //     top: editiconImg.style.top || "0px",
            //     left: editiconImg.style.left || "0px",
            //     zoom: editiconImg.style.transform || "scale(1)"
            // },
            userNameStyle: {
                color1: document.getElementById("user-gradient-color1").value,
                color2: document.getElementById("user-gradient-color2").value,
                border: document.getElementById("user-border-color").value
            }
        };

        const backgroundImage = document.getElementById("background-image");
        //   const userIcon = document.getElementById("user-icon");

        data.backgroundImg = {
            url: backgroundUrl || "x",
            left: backgroundImage.style.left,
            top: backgroundImage.style.top,
            zoom: backgroundImage.style.transform
        };

        data.userIcon = {
            url: iconUrl || "x",
            left: userIcon.style.left,
            top: userIcon.style.top,
            zoom: userIcon.style.transform
        };

        const ref = database.ref(`usuarios/${currentUser}/background`);
        ref.set(data).then(() => {
            alert("Layout salvo com sucesso!");
        }).catch((error) => {
            console.error("Erro ao salvar:", error);
        });
    }


    function updateButtonPreview() {
        const bgColor = document.getElementById("button-bg-color").value;
        const hoverBgColor = document.getElementById("button-hover-bg-color").value;
        const textColor = document.getElementById("button-text-color").value;
        const borderRadius = document.getElementById("button-border-radius").value;
        const buttonWidth = document.getElementById("button-width").value;
        const buttonHeight = document.getElementById("button-height").value;

        // Atualizar os bot√µes na interface
        const buttons = document.querySelectorAll("#add-card-filmes, #add-card-jogos, #add-card-livros, #add-card-animes, #add-card-kids, #add-card-series");
        buttons.forEach(button => {
            button.style.backgroundColor = bgColor;
            button.style.color = textColor;
            button.style.borderRadius = `${borderRadius}px`;
            button.style.width = `${buttonWidth}px`;
            button.style.height = `${buttonHeight}px`;
        });

        // Atualizar o hover dinamicamente
        const style = document.getElementById("dynamic-button-style");
        if (style) style.remove(); // Remover estilo antigo

        const hoverStyle = document.createElement("style");
        hoverStyle.id = "dynamic-button-style";
        hoverStyle.innerHTML = `
        #add-card-filmes:hover, #add-card-jogos:hover, #add-card-livros:hover, #add-card-animes:hover, #add-card-kids:houver, #add-card-series:hover {
            background-color: ${hoverBgColor};
        }
    `;
        document.head.appendChild(hoverStyle);

        // Atualizar os valores exibidos
        document.getElementById("button-border-radius-value").textContent = `${borderRadius}px`;
        document.getElementById("button-width-value").textContent = `${buttonWidth}px`;
        document.getElementById("button-height-value").textContent = `${buttonHeight}px`;
    }


    function removeImage() {
        // Define "x" no campo de URL da imagem de fundo
        document.getElementById("background-url").value = "x";
        // Remove a imagem de fundo da visualiza√ß√£o
        document.body.style.backgroundImage = "none";
    }

    function removeIcon() {
        // Define "x" no campo de URL da imagem de fundo
        document.getElementById("icon-url").value = "x";
        // Remove a imagem de fundo da visualiza√ß√£o
        document.body.style.backgroundImage = "none";
    }

    function applyCrop() {
        const editable = document.getElementById('editable-img');
        const zoom = parseFloat(document.getElementById('zoom-range').value);
        const imgLeft = editable.style.left;
        const imgTop = editable.style.top;

        // Aplicar na imagem real
        selectedImg.style.left = imgLeft;
        selectedImg.style.top = imgTop;
        selectedImg.style.transform = `scale(${zoom})`;
        selectedImg.style.position = "absolute";
        selectedImg.style.height = "100%";
        selectedImg.style.width = "auto";

        // SALVAR NO FIREBASE (ajuste o caminho conforme seu projeto!)
        const cardKey = selectedCard.getAttribute("data-key"); // ou outro identificador
        if (!currentUser || !cardKey) return;

        const cardRowId = selectedCard.closest(".card-row").id;
        const session = cardRowId.split("-")[2]; // filmes, jogos, etc.
        const ref = firebase.database().ref(`usuarios/${currentUser}/${session}/${cardKey}`);

        ref.update({
            crop: {
                left: imgLeft,
                top: imgTop,
                zoom: zoom
            }
        }).then(() => {
            console.log("Crop salvo no Firebase!");
        });

        closeModal();
    }

    function closeModal() {
        document.getElementById('crop-modal').style.display = 'none';
    }

    function editCardCrop() {
        const modal = document.getElementById('crop-modal');
        const editable = document.getElementById('editable-img');
        const zoomSlider = document.getElementById('zoom-range');

        if (!selectedImg) return;

        // Aplica imagem no editor
        editable.src = selectedImg.src;
        editable.style.left = selectedImg.style.left || "0px";
        editable.style.top = selectedImg.style.top || "0px";
        zoomSlider.value = selectedImg.style.transform?.match(/scale\(([\d.]+)\)/)?.[1] || "1";
        editable.style.transform = `scale(${zoomSlider.value})`;

        // Reset posi√ß√£o
        posX = parseFloat(editable.style.left) || 0;
        posY = parseFloat(editable.style.top) || 0;

        modal.style.display = 'flex';

        // Drag & Drop
        editable.onmousedown = (e) => {
            isDragging = true;
            startX = e.clientX - posX;
            startY = e.clientY - posY;
            editable.style.cursor = 'grabbing';
        };
        document.onmouseup = () => {
            isDragging = false;
            editable.style.cursor = 'grab';
        };
        document.onmousemove = (e) => {
            if (!isDragging) return;
            posX = e.clientX - startX;
            posY = e.clientY - startY;
            editable.style.left = `${posX}px`;
            editable.style.top = `${posY}px`;
        };
        zoomSlider.oninput = () => {
            editable.style.transform = `scale(${zoomSlider.value})`;
        };
    }

    function applyLayoutCrop(data) {
        const bgImg = document.getElementById('background-image');
        // const iconImg = document.getElementById('user-icon');

        if (data.backgroundImg) {
            bgImg.src = data.backgroundImg.url || "";
            bgImg.style.left = data.backgroundImg.left || "0px";
            bgImg.style.top = data.backgroundImg.top || "0px";
            bgImg.style.transform = data.backgroundImg.zoom || "scale(1)";
        }

        if (data.userIcon) {
            iconImg.src = data.userIcon.url || "";
            iconImg.style.left = data.userIcon.left || "0px";
            iconImg.style.top = data.userIcon.top || "0px";
            iconImg.style.transform = data.userIcon.zoom || "scale(1)";
        }
    }


    function saveLayoutCropToFirebase() {
        const layout = document.getElementById('editlayout');
        const icon = document.getElementById('edit-icon');

        const cropData = {
            editlayout: {
                background: {
                    url: getComputedStyle(layout).backgroundImage.replace(/^url\(["']?/, '').replace(/["']?\)$/, ''),
                    left: layout.style.backgroundPosition.split(" ")[0] || "0px",
                    top: layout.style.backgroundPosition.split(" ")[1] || "0px",
                    zoom: parseFloat(layout.style.backgroundSize) / 100 || 1
                },
                icon: {
                    url: icon.src,
                    left: icon.style.left || "0px",
                    top: icon.style.top || "0px",
                    zoom: parseFloat(icon.style.transform?.match(/scale\(([\d.]+)\)/)?.[1]) || 1
                }
            }
        };

        firebase.database().ref(`usuarios/${currentUser}/editlayout`).set(cropData.editlayout)
            .then(() => {
                console.log("Layout crop salvo com sucesso!");
            })
            .catch((error) => {
                console.error("Erro ao salvar layout crop:", error);
            });
    }

    function makeDraggableZoomable(imgId, zoomSliderId) {
        const img = document.getElementById(imgId);
        const zoomSlider = document.getElementById(zoomSliderId);
        let isDragging = false;
        let startX, startY, startLeft, startTop;

        img.addEventListener("mousedown", function (e) {
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
            startLeft = parseInt(img.style.left || 0);
            startTop = parseInt(img.style.top || 0);
            img.style.cursor = "grabbing";
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
            img.style.cursor = "grab";
            updateBodyBackground(); // Atualiza o fundo do body ao soltar o mouse
        });

        document.addEventListener("mousemove", (e) => {
            if (!isDragging) return;
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;
            img.style.left = `${startLeft + dx}px`;
            img.style.top = `${startTop + dy}px`;
        });

        zoomSlider.addEventListener("input", () => {
            const zoom = parseFloat(zoomSlider.value);
            img.style.transform = `scale(${zoom})`;
            updateBodyBackground(); // Atualiza o fundo do body ao ajustar o zoom
        });
    }


    function updateBodyBackground() {
        const bgImg = document.getElementById("background-image");
        const layoutImg = document.getElementById("editlayout-child");

        bgImg.src = layoutImg.src;
        bgImg.style.left = layoutImg.style.left;
        bgImg.style.top = layoutImg.style.top;
        bgImg.style.transform = layoutImg.style.transform;
    }

    // function resetarIcone() {
    //     const icone = document.getElementById("user-icon");
    //     icone.style.top = "10px";
    //     icone.style.left = "10px";
    //     icone.style.transform = "scale(1)";
    // }

    const inputUrl = document.getElementById("icon-Url");
    const editIconImg = document.getElementById("editicon-child");

    inputUrl.addEventListener("input", function () {
        editIconImg.src = this.value;
    });

    ["user-gradient-color1", "user-gradient-color2", "user-border-color"].forEach(id => {
        document.getElementById(id).addEventListener("input", applyUserDisplayStyle);
    });

    function applyUserDisplayStyle() {
        const color1 = document.getElementById("user-gradient-color1").value;
        const color2 = document.getElementById("user-gradient-color2").value;
        const borderColor = document.getElementById("user-border-color").value;
        const userDisplay = document.getElementById("user-display");

        userDisplay.style.background = `linear-gradient(to right, ${color1}, ${color2})`;
        userDisplay.style.webkitBackgroundClip = "text";
        userDisplay.style.webkitTextFillColor = "transparent";
        userDisplay.style.border = `2px solid ${borderColor}`;
        // userDisplay.style.padding = "5px";
        userDisplay.style.borderRadius = "8px";
        userDisplay.style.display = "inline-block";
    }

    function loadUserList() {
        const list = document.getElementById("user-list");
        list.innerHTML = "";

        database.ref("usuarios").once("value", (snapshot) => {
            const users = snapshot.val();
            console.log("üî• Usuarios encontrados:", users);

            for (const user in users) {




                    console.log("üëâ Adicionando usu√°rio √† lista:", user); // debug

                    // Recuperar as cores e imagem do usu√°rio
                    const color1 = users[user]?.background?.userNameStyle?.color1 || "#ffffff";
                    const color2 = users[user]?.background?.userNameStyle?.color2 || "#ffffff";
                    const imgSrc = users[user]?.background?.userIcon?.url || "";

                    // Criar o item da lista (li)
                    const li = document.createElement("li");
                    li.textContent = `${user}`;  // Nome do usu√°rio

                    // Definir vari√°veis CSS para gradiente
                    li.style.setProperty('--color1', color1);
                    li.style.setProperty('--color2', color2);

                    // Criar a imagem
                    const img = document.createElement("img");
                    img.src = imgSrc;
                    img.className = "user-icon-friends"; // Usa a classe j√° feita

                    // Criar o span para o item da lista
                    const span = document.createElement("span");
                    span.className = "user-list-item";  // Usa a classe para aplicar o estilo de layout
                    span.appendChild(li);
                    span.appendChild(img);  // Imagem na direita

                    // Configurar o clique para mostrar o perfil do usu√°rio
                    span.onclick = () => showOtherUserProfile(user);

                    // Adicionar o item √† lista
                    list.appendChild(span);
            }
        });
    }



    function showOtherUserProfile(user) {
        document.getElementById("savebackground")?.remove();

        loadBackgrounduser(user);
        contarTrofeus(user);
        document.getElementById("user-display").textContent = `${user}`;

        // Encontrar o elemento pelo ID
        var dropdownMenu = document.getElementById("dropdownMenu");

        try {
            // Remover o elemento
            dropdownMenu.remove();
        } catch (error) {
        }

        // Esconde todos os bot√µes do menu de contexto
        document.querySelectorAll(".BotaoDireitoMouse").forEach(btn => btn.classList.add("hidden"));

        // Exibe o bot√£o de copiar card
        document.querySelector(".copiarCard").classList.remove("hidden");

        const sections = ["filmes", "jogos", "livros", "animes", "kids", "series"];
        sections.forEach(session => {
            const ref = database.ref(`usuarios/${user}/${session}`);
            const cardRow = document.getElementById(`card-row-${session}`);
            if (cardRow) {
                cardRow.innerHTML = "";
            }
            ref.once("value", (snapshot) => {
                const data = snapshot.val();
                if (data && cardRow) {
                    Object.entries(data).forEach(([key, cardData]) => {
                        const card = createCard(cardData, key);
                        card.querySelector(".card").onclick = null;
                        card.oncontextmenu = null;
                        cardRow.appendChild(card);
                    });
                }
            });
        });

        sections.forEach(s => {
            const btn = document.getElementById(`add-card-${s}`);
            if (btn) btn.classList.add("hidden");
        });
    }

    function loadBackgrounduser(usuarioprocurado) {
  const ref = database.ref(`usuarios/${usuarioprocurado}/background`);
  console.log("Carregando dados de outro usu√°rio:", usuarioprocurado);

  ref.once("value", (snapshot) => {
    const data = snapshot.val();
    const gridContainer = document.getElementsByClassName("grid-container")[0];
    let backgroundStyle = "";

    // BACKGROUND IMAGE
    const backgroundUrl = (data?.url && data.url !== "x") ? data.url : "x";
    document.getElementById("background-url").value = backgroundUrl;
    document.getElementById("editlayout-child").src = backgroundUrl;

    const content = document.getElementById("gridContainer").getElementsByClassName("content")[0];
    if (content) content.src = backgroundUrl;

    // ICON IMAGE
    const iconUrl = (data?.iconUrl && data.iconUrl !== "x") ? data.iconUrl : "";
    document.getElementById("icon-Url").value = iconUrl;
    document.getElementById("user-icon").src = iconUrl;
    document.getElementById("editicon-child").src = iconUrl;

    // EDITLAYOUT
    const layoutImg = document.getElementById("editlayout-child");
    layoutImg.style.top = data?.editlayout?.top || "0px";
    layoutImg.style.left = data?.editlayout?.left || "0px";
    layoutImg.style.transform = data?.editlayout?.zoom || "scale(1)";

    // BACKGROUND COLORS
    const color1 = data?.color1 || "#ffffff";
    const color2 = data?.color2 || "#ffffff";

    backgroundStyle = (color1 !== color2)
      ? `linear-gradient(135deg, ${color1}, ${color2})`
      : color1;

    gridContainer.style.background = backgroundStyle;
    document.getElementById("background-color1").value = color1;
    document.getElementById("background-color2").value = color2;

    // BUTTON STYLE
    const btnStyle = data?.buttonStyle || {};
    document.getElementById("button-bg-color").value = btnStyle.bgColor || "#3498db";
    document.getElementById("button-hover-bg-color").value = btnStyle.hoverBgColor || "#2ecc71";
    document.getElementById("button-text-color").value = btnStyle.textColor || "#ffffff";
    document.getElementById("button-border-radius").value = btnStyle.borderRadius || 25;
    document.getElementById("button-width").value = btnStyle.width || 150;
    document.getElementById("button-height").value = btnStyle.height || 40;
    updateButtonPreview();

    // USERNAME STYLE
    const userStyle = data?.userNameStyle || {};
    document.getElementById("user-gradient-color1").value = userStyle.color1 || "#ffffff";
    document.getElementById("user-gradient-color2").value = userStyle.color2 || "#ffffff";
    document.getElementById("user-border-color").value = userStyle.border || "#000000";
    applyUserDisplayStyle();

    // BACKGROUND IMAGE POSITIONING
    const bgImg = document.getElementById("background-image");
    const bgData = data?.backgroundImg;
    bgImg.src = bgData?.url || "";
    bgImg.style.left = bgData?.left || "0px";
    bgImg.style.top = bgData?.top || "0px";
    bgImg.style.transform = bgData?.zoom || "scale(1)";

    // Apply layout cropping
    applyLayoutCrop(data || {});
  }).catch((error) => {
    console.error("Erro ao carregar os dados:", error);
  });
}



    function copyCardToMyProfile() {
        if (!currentUser || !selectedCard) return alert("Voc√™ precisa estar logado.");

        const cardRowId = selectedCard.closest(".card-row").id; // card-row-filmes
        const session = cardRowId.split("-")[2];
        const cardKey = selectedCard.getAttribute("data-key");
        const userOrigin = document.getElementById("user-display").textContent; // Nome do usu√°rio visualizado

        if (!userOrigin || !session || !cardKey) {
            alert("Erro: dados incompletos para copiar.");
            return;
        }

        const fromRef = database.ref(`usuarios/${userOrigin}/${session}/${cardKey}`);
        const toRef = database.ref(`usuarios/${currentUser}/${session}/${cardKey}`);

        fromRef.once("value").then((snapshot) => {
            const data = snapshot.val();
            if (data) {
                return toRef.set(data);
            } else {
                throw new Error("Card n√£o encontrado.");
            }
        }).then(() => {
            alert("Card copiado com sucesso!");
            loadCards(session);
        }).catch((error) => {
            console.error("Erro ao copiar card:", error);
            alert("Erro ao copiar o card.");
        });
    }

    // Fun√ß√£o para contar os trof√©us
    function contarTrofeus(usuarioprocurado) {
        let ouro = 0, prata = 0, bronze = 0;
        console.log("usuarioprocurado:", usuarioprocurado);
        console.log("currentUser:", currentUser); // debug
        // Verificar se usuarioprocurado √© uma string v√°lida
        if (typeof usuarioprocurado !== 'string' || usuarioprocurado.trim() === '') {
            usuarioprocurado = currentUser;
        }
        // Refer√™ncia ao Firebase para os cart√µes do usu√°rio
        let ref = database.ref(`usuarios/${usuarioprocurado}`);
        console.log("Carregando dados de usu√°rio:", usuarioprocurado);
        ref.once("value", (snapshot) => {
            const data = snapshot.val();
            if (data) {
                Object.values(data).forEach(session => {
                    Object.values(session).forEach(card => {
                        if (card.trofeu === "platina") {
                            ouro++;
                        } else if (card.trofeu === "zerado") {
                            prata++;
                        } else if (card.trofeu === "jogado") {
                            bronze++;
                        }
                    });
                });
            }
            // Atualizar os elementos HTML com as quantidades de trof√©us
            document.getElementById("trofeus-ouro").textContent = `${ouro}`;
            document.getElementById("trofeus-prata").textContent = `${prata}`;
            document.getElementById("trofeus-bronze").textContent = `${bronze}`;
        });
    }

    // Chamar a fun√ß√£o contarTrofeus ao carregar a p√°gina
    document.addEventListener("DOMContentLoaded", contarTrofeus);


    function removerTrofeu() {
        if (selectedCard) {
            // Obter informa√ß√µes do cart√£o e do Firebase
            const cardRowId = selectedCard.closest(".card-row").id; // Ex: "card-row-animes"
            const session = cardRowId.split("-")[2]; // Ex: "animes"
            const cardKey = selectedCard.getAttribute("data-key"); // A chave do Firebase
            if (!cardKey) {
                alert("Erro: N√£o foi poss√≠vel identificar o cart√£o.");
                return;
            }
            const ref = database.ref(`usuarios/${currentUser}/${session}/${cardKey}`);
            ref.update({ trofeu: null })
                .then(() => {
                    alert("Trof√©u removido com sucesso!");
                    // Atualizar a interface
                    const trofeuImg = selectedCard.querySelector(".front img[src*='trofeus']");
                    if (trofeuImg) {
                        trofeuImg.remove();
                    }
                })
                .catch((error) => {
                    console.error("Erro ao remover trof√©u:", error);
                });
        }
    }

    // Fun√ß√£o para filtrar a lista de usu√°rios
    function filterUserList() {
        const searchInput = document.getElementById('search-bar').value.toLowerCase();
        const userList = document.getElementById('user-list');
        const users = userList.getElementsByTagName('li');

        for (let i = 0; i < users.length; i++) {
            const user = users[i].textContent.toLowerCase();
            if (user.includes(searchInput)) {
                users[i].parentElement.style.display = '';
            } else {
                users[i].parentElement.style.display = 'none';
            }
        }
    }

    // Adicionar evento de input ao campo de pesquisa
    document.getElementById('search-bar').addEventListener('input', filterUserList);

    function fecharboasvindas() {
        if (!currentUser) return;
        let ref = database.ref(`usuarios/${currentUser}/welcome`);
        ref.set({ boasvindas: true })
        const welcomeMessage = document.getElementById('welcome-message');
        welcomeMessage.style.display = 'none';
    }

    function sendMessage() {
  if (!currentUser) return;

  const input = document.getElementById("chat-input");
  const text = input.value.trim();
  if (!text) return;

  const user = currentUser;
  const display = document.getElementById("user-display");
  const color1 = document.getElementById("user-gradient-color1").value;
  const color2 = document.getElementById("user-gradient-color2").value;

  const now = new Date();
const pad = (n) => n.toString().padStart(2, "0");
const padMs = (n) => n.toString().padStart(3, "0");

const formattedDate =
  `${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())} ` +
  `${pad(now.getHours())}-${pad(now.getMinutes())}-${pad(now.getSeconds())}-${padMs(now.getMilliseconds())}`;

  const formattedDateMsg = `${pad(now.getDate())}-${pad(now.getMonth() + 1)}-${now.getFullYear()} ${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`

  const message = {
    user: user,
    text: text,
    style: `linear-gradient(135deg, ${color1}, ${color2})`,
    timestamp: formattedDateMsg
  };

  const safeKey = Date.now().toString();
  firebase.database().ref("messages/" + formattedDate).set(message);

  input.value = "";
}



    document.addEventListener("DOMContentLoaded", function () {
        cleanOldMessages();
    });

    function cleanOldMessages() {
  const now = new Date();
  now.setDate(now.getDate() - 30); // Subtrai 1 dia

  firebase.database().ref("messages").once("value", function (snapshot) {
    snapshot.forEach(function (childSnapshot) {
      const key = childSnapshot.key;

      // Extrai a data e hora da chave
      const [datePart, timePart] = key.split(" ");
      if (!datePart || !timePart) return;

      // Converte para formato ISO: "2025-04-30T16:30:39.122Z"
      const isoString = datePart + "T" + timePart.replace(/-/g, ":").replace(/:(\d{3})$/, ".$1") + "Z";
      const messageDate = new Date(isoString);

      // Compara com 24h atr√°s
      if (messageDate < now) {
        console.log("Removendo:", key);
        firebase.database().ref("messages/" + key).remove();
      }
    });
  });
}

</script>

</html>